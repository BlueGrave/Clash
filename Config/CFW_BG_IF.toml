version = 1
[custom]
enable_rule_generator = true
overwrite_original_rules = true
clash_rule_base = "https://raw.githubusercontent.com/BlueGrave/Clash/master/GeneralClashConfig.yaml"

[[custom_groups]]
name = "DEFAULT"
type = "select"
rule = [
    "[]ImmTelecom | 日本",
    "[]ImmTelecom | 香港",
    "[]ImmTelecom | 新加坡",
    "[]ImmTelecom | 美国",
    "[]ImmTelecom | 台湾",
    "[]FlowerCloud | 香港",
    "[]FlowerCloud | 新加坡",
    "[]FlowerCloud | 日本",
    "[]FlowerCloud | 美国",
    "[]FlowerCloud | 台湾",
    "[]PROXY"
]

[[custom_groups]]
name = "YouTube"
type = "select"
rule = [
    "[]DEFAULT",
    "[]PROXY"
]

[[custom_groups]]
name = "Netflix"
type = "select"
rule = ["TWN|台湾"]

[[custom_groups]]
name = "Disney+"
type = "select"
rule = ["HKG|SGP|新加坡|日本"]

[[custom_groups]]
name = "HBO GO"
type = "select"
rule = ["HKG|TWN|香港|台湾"]

[[custom_groups]]
name = "Emby"
type = "select"
rule = [
    "[]ImmTelecom | 美国",
    "[]FlowerCloud | Emby 专用",
    "[]PROXY"
]

[[custom_groups]]
name = "Spotify"
type = "select"
rule = [
    "[]DEFAULT",
    "[]ImmTelecom | 台湾",
    "[]FlowerCloud | 台湾",
    "[]PROXY"
]

[[custom_groups]]
name = "PayPal"
type = "select"
rule = [
    "[]DEFAULT",
    "[]ImmTelecom | 台湾",
    "[]FlowerCloud | 台湾",
    "[]PROXY"
]

[[custom_groups]]
name = "GitHub"
type = "select"
rule = [
    "[]DEFAULT",
    "[]PROXY"
]

[[custom_groups]]
name = "GoogleVoice"
type = "select"
rule = [
    "[]ImmTelecom | 美国",
    "[]FlowerCloud | 美国",
    "[]PROXY"
]

[[custom_groups]]
name = "Google"
type = "select"
rule = [
    "[]DEFAULT",
    "[]PROXY"
]

[[custom_groups]]
name = "Games"
type = "select"
rule = [
    "[]DIRECT",
    "[]DEFAULT",
    "[]PROXY"
]

[[custom_groups]]
name = "AppleOS Update"
type = "select"
rule = [
    "[]DIRECT",
    "[]REJECT",
    "[]DEFAULT"
]

[[custom_groups]]
name = "Speedtest"
type = "select"
rule = [
    "[]DIRECT",
    ".*"
]

[[custom_groups]]
name = "PROXY"
type = "select"
rule = [".*"]

[[custom_groups]]
name = "ImmTelecom | 日本"
type = "url-test"
rule = ["JPN"]
url = "http://cp.cloudflare.com/generate_204"
interval = 600
tolerance = 20

[[custom_groups]]
name = "ImmTelecom | 香港"
type = "url-test"
rule = ["HKG"]
url = "http://cp.cloudflare.com/generate_204"
interval = 600
tolerance = 20

[[custom_groups]]
name = "ImmTelecom | 新加坡"
type = "url-test"
rule = ["SGP"]
url = "http://cp.cloudflare.com/generate_204"
interval = 600
tolerance = 20

[[custom_groups]]
name = "ImmTelecom | 美国"
type = "url-test"
rule = ["USA"]
url = "http://cp.cloudflare.com/generate_204"
interval = 600
tolerance = 20

[[custom_groups]]
name = "ImmTelecom | 台湾"
type = "url-test"
rule = ["TWN"]
url = "http://cp.cloudflare.com/generate_204"
interval = 600
tolerance = 20

[[custom_groups]]
name = "FlowerCloud | 香港"
type = "url-test"
rule = ["香港高级|香港标准"]
url = "http://cp.cloudflare.com/generate_204"
interval = 600
tolerance = 20

[[custom_groups]]
name = "FlowerCloud | 新加坡"
type = "url-test"
rule = ["新加坡高级|新加坡标准"]
url = "http://cp.cloudflare.com/generate_204"
interval = 600
tolerance = 20

[[custom_groups]]
name = "FlowerCloud | 日本"
type = "url-test"
rule = ["日本高级|日本标准"]
url = "http://cp.cloudflare.com/generate_204"
interval = 600
tolerance = 20

[[custom_groups]]
name = "FlowerCloud | 美国"
type = "url-test"
rule = ["美国高级|美国标准"]
url = "http://cp.cloudflare.com/generate_204"
interval = 600
tolerance = 20

[[custom_groups]]
name = "FlowerCloud | 台湾"
type = "url-test"
rule = ["台湾高级|台湾标准"]
url = "http://cp.cloudflare.com/generate_204"
interval = 600
tolerance = 20

[[custom_groups]]
name = "FlowerCloud | Emby 专用"
type = "fallback"
rule = ["实验性"]
url = "http://cp.cloudflare.com/generate_204"
interval = 600

[[rulesets]]
group = "DIRECT"
ruleset = "https://raw.githubusercontent.com/BlueGrave/Clash/master/Providers/WhiteList.yaml"
type = "clash-classic"

[[rulesets]]
group = "REJECT"
ruleset = "https://raw.githubusercontent.com/BlueGrave/Clash/master/Providers/BlackList.yaml"
type = "clash-classic"

[[rulesets]]
group = "DEFAULT"
ruleset = "https://raw.githubusercontent.com/BlueGrave/Clash/master/Providers/RedList.yaml"
type = "clash-classic"

[[rulesets]]
group = "DIRECT"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.yaml"
type = "clash-classic"

[[rulesets]]
group = "REJECT"
ruleset = "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/BanAD.yaml"
type = "clash-classic"

[[rulesets]]
group = "REJECT"
ruleset = "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/BanEasyList.yaml"
type = "clash-classic"

[[rulesets]]
group = "REJECT"
ruleset = "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/BanEasyListChina.yaml"
type = "clash-classic"

[[rulesets]]
group = "REJECT"
ruleset = "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/BanProgramAD.yaml"
type = "clash-classic"

[[rulesets]]
group = "REJECT"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Hijacking/Hijacking.yaml"
type = "clash-classic"

[[rulesets]]
group = "REJECT"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Privacy/Privacy_Classical.yaml"
type = "clash-classic"

[[rulesets]]
group = "REJECT"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ZhihuAds/ZhihuAds.yaml"
type = "clash-classic"

[[rulesets]]
group = "AppleOS Update"
ruleset = "https://raw.githubusercontent.com/BlueGrave/Clash/master/Providers/AppleOS_Update.yaml"
type = "clash-classic"

[[rulesets]]
group = "DIRECT"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Download/Download.yaml"
type = "clash-classic"

[[rulesets]]
group = "DIRECT"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PrivateTracker/PrivateTracker.yaml"
type = "clash-classic"

[[rulesets]]
group = "YouTube"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml"
type = "clash-classic"

[[rulesets]]
group = "Netflix"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml"
type = "clash-classic"

[[rulesets]]
group = "Disney+"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.yaml"
type = "clash-classic"

[[rulesets]]
group = "HBO GO"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/HBOHK/HBOHK.yaml"
type = "clash-classic"

[[rulesets]]
group = "HBO GO"
ruleset = "https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/StreamingMedia/Video/HBO-Asia.yaml"
type = "clash-classic"

[[rulesets]]
group = "Emby"
ruleset = "https://raw.githubusercontent.com/BlueGrave/Clash/master/Providers/Emby.yaml"
type = "clash-classic"

[[rulesets]]
group = "Spotify"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml"
type = "clash-classic"

[[rulesets]]
group = "DEFAULT"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia.yaml"
type = "clash-classic"

[[rulesets]]
group = "PayPal"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PayPal/PayPal.yaml"
type = "clash-classic"

[[rulesets]]
group = "GitHub"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml"
type = "clash-classic"

[[rulesets]]
group = "DEFAULT"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OneDrive/OneDrive.yaml"
type = "clash-classic"

[[rulesets]]
group = "DEFAULT"
ruleset = "https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/Extra/Google/GoogleDrive.yaml"
type = "clash-classic"

[[rulesets]]
group = "GoogleVoice"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GoogleVoice/GoogleVoice.yaml"
type = "clash-classic"

[[rulesets]]
group = "Google"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml"
type = "clash-classic"

[[rulesets]]
group = "DEFAULT"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml"
type = "clash-classic"

[[rulesets]]
group = "Speedtest"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Speedtest/Speedtest.yaml"
type = "clash-classic"

[[rulesets]]
group = "Games"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.yaml"
type = "clash-classic"

[[rulesets]]
group = "Games"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Epic/Epic.yaml"
type = "clash-classic"

[[rulesets]]
group = "DEFAULT"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TestFlight/TestFlight.yaml"
type = "clash-classic"

[[rulesets]]
group = "DIRECT"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.yaml"
type = "clash-classic"

[[rulesets]]
group = "DIRECT"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml"
type = "clash-classic"

[[rulesets]]
group = "DIRECT"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMedia/ChinaMedia.yaml"
type = "clash-classic"

[[rulesets]]
group = "DEFAULT"
ruleset = "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global_Classical.yaml"
type = "clash-classic"

[[rulesets]]
group = "DIRECT"
ruleset = "[]GEOIP,CN"

[[rulesets]]
group = "DEFAULT"
ruleset = "[]FINAL"